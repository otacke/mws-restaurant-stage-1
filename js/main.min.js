var restaurants,neighborhoods,cuisines,map,markers=[];document.addEventListener("DOMContentLoaded",function(a){fetchNeighborhoods();fetchCuisines()});fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(a,c){a?console.error(a):(self.neighborhoods=c,fillNeighborhoodsHTML())})};fillNeighborhoodsHTML=function(a){a=void 0===a?self.neighborhoods:a;var c=document.getElementById("neighborhoods-select");a.forEach(function(a){var b=document.createElement("option");b.innerHTML=a;b.value=a;c.append(b)})};
fetchCuisines=function(){DBHelper.fetchCuisines(function(a,c){a?console.error(a):(self.cuisines=c,fillCuisinesHTML())})};fillCuisinesHTML=function(a){a=void 0===a?self.cuisines:a;var c=document.getElementById("cuisines-select");a.forEach(function(a){var b=document.createElement("option");b.innerHTML=a;b.value=a;c.append(b)})};window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1});updateRestaurants()};
updateRestaurants=function(){var a=document.getElementById("cuisines-select"),c=document.getElementById("neighborhoods-select");DBHelper.fetchRestaurantByCuisineAndNeighborhood(a[a.selectedIndex].value,c[c.selectedIndex].value,function(a,c){a?console.error(a):(resetRestaurants(c),fillRestaurantsHTML())})};
resetRestaurants=function(a){self.restaurants=[];document.getElementById("restaurants-list").innerHTML="";self.markers.forEach(function(a){return a.setMap(null)});self.markers=[];self.restaurants=a};fillRestaurantsHTML=function(a){a=void 0===a?self.restaurants:a;var c=document.getElementById("restaurants-list");a.forEach(function(a){c.append(createRestaurantHTML(a))});addMarkersToMap()};
createRestaurantHTML=function(a){var c=document.createElement("li");c.classList.add("restaurant");var b=DBHelper.imageUrlForRestaurant(a),e=b.replace(".webp","_280w.webp"),f=b.replace(".webp","_480w.webp"),d=document.createElement("img");d.className="restaurant-img";d.alt=a.name+" Restaurant";d.src=b;d.srcset=e+" 280w, "+f+" 480w, "+b+" 800w";d.sizes="(max-width: 450px) 280px, (max-width: 600px) 480px, 800px";c.append(d);b=document.createElement("h2");b.innerHTML=a.name;c.append(b);b=document.createElement("p");
b.innerHTML=a.neighborhood;c.append(b);b=document.createElement("p");b.innerHTML=a.address;c.append(b);b=document.createElement("a");b.innerHTML="View Details";b.href=DBHelper.urlForRestaurant(a);b.setAttribute("aria-label","Click for more information about "+a.name+".");c.append(b);return c};
addMarkersToMap=function(a){a=void 0===a?self.restaurants:a;a.forEach(function(a){var b=DBHelper.mapMarkerForRestaurant(a,self.map);google.maps.event.addListener(b,"click",function(){window.location.href=b.url});self.markers.push(b)})};navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js").then(function(){return console.log("Service worker has been registered.")})["catch"](function(a){return console.log("Could not register service worker ("+a+").")});
document.onreadystatechange=function(){if("complete"===document.readyState){var a=document.getElementById("map").querySelector("iframe");a&&a.setAttribute("title","GoogleMap")}};
