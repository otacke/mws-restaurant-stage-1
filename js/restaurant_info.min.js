var restaurant,map;window.initMap=function(){fetchRestaurantFromURL(function(a,b){a?console.error(a):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:b.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})};
fetchRestaurantFromURL=function(a){if(self.restaurant)a(null,self.restaurant);else{var b=getParameterByName("id");b?DBHelper.fetchRestaurantById(b,function(b,d){(self.restaurant=d)?(fillRestaurantHTML(),a(null,d)):console.error(b)}):a("No restaurant id in URL",null)}};
fillRestaurantHTML=function(a){a=void 0===a?self.restaurant:a;document.getElementById("restaurant-name").innerHTML=a.name;document.getElementById("restaurant-address").innerHTML=a.address;var b=DBHelper.imageUrlForRestaurant(a),c=b.replace(".webp","_280w.webp"),d=b.replace(".webp","_480w.webp"),e=document.getElementById("restaurant-img");e.className="restaurant-img";e.src=b;e.srcset=c+" 280w, "+d+" 480w, "+b+" 800w";e.sizes="(max-width: 450px) 280px, (max-width: 600px) 480px, 800px";e.alt="An image of restaurant"+
a.name+" in "+a.neighborhood;document.getElementById("restaurant-cuisine").innerHTML=a.cuisine_type;a.operating_hours&&fillRestaurantHoursHTML();fillReviewsHTML()};
fillRestaurantHoursHTML=function(a){a=void 0===a?self.restaurant.operating_hours:a;var b=document.getElementById("restaurant-hours"),c;for(c in a){var d=document.createElement("div");d.setAttribute("role","listitem");d.setAttribute("tabindex",0);d.classList.add("restaurant-hours-row");var e=document.createElement("div");e.classList.add("restaurant-hours-day");e.innerHTML=c;d.appendChild(e);e=document.createElement("div");e.classList.add("restaurant-hours-time");e.innerHTML=a[c];d.appendChild(e);b.appendChild(d)}};
fillReviewsHTML=function(a){a=void 0===a?self.restaurant.reviews:a;var b=document.getElementById("reviews-container"),c=document.createElement("h3");c.innerHTML="Reviews";c.id="review-title";b.appendChild(c);if(a){var d=document.getElementById("reviews-list");a.forEach(function(a){d.appendChild(createReviewHTML(a))});b.appendChild(d)}else a=document.createElement("p"),a.innerHTML="No reviews yet!",b.appendChild(a)};
createReviewHTML=function(a){var b=document.createElement("div");b.setAttribute("role","listitem");b.setAttribute("tabindex",0);b.classList.add("reviews-item");var c=document.createElement("div");c.classList.add("review-header");b.appendChild(c);var d=document.createElement("p");d.classList.add("review-name");d.innerHTML=a.name;c.appendChild(d);d=document.createElement("p");d.classList.add("review-date");d.innerHTML=a.date;c.appendChild(d);d=document.createElement("p");d.classList.add("review-rating");
d.innerHTML="Rating: "+a.rating;c.appendChild(d);c=document.createElement("p");c.classList.add("review-comments");c.innerHTML=a.comments;b.appendChild(c);return b};fillBreadcrumb=function(a){a=void 0===a?self.restaurant:a;var b=document.getElementById("breadcrumb"),c=document.createElement("li");c.innerHTML=a.name;b.appendChild(c)};
getParameterByName=function(a,b){b||(b=window.location.href);a=a.replace(/[\[\]]/g,"\\$&");var c=(new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)")).exec(b);return c?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null};navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js").then(function(){return console.log("Service worker has been registered.")})["catch"](function(a){return console.log("Could not register service worker ("+a+").")});
