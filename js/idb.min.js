var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[d]=g.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var d=0;return $jscomp.iteratorPrototype(function(){return d<c.length?{done:!1,value:c[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var d=c[Symbol.iterator];return d?d.call(c):$jscomp.arrayIterator(c)};
$jscomp.polyfill=function(c,d,g,a){if(d){g=$jscomp.global;c=c.split(".");for(a=0;a<c.length-1;a++){var l=c[a];l in g||(g[l]={});g=g[l]}c=c[c.length-1];a=g[c];d=d(a);d!=a&&null!=d&&$jscomp.defineProperty(g,c,{configurable:!0,writable:!0,value:d})}};$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function d(){this.batch_=null}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;d.prototype.asyncExecute=function(b){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(b);return this};d.prototype.asyncExecuteBatch_=function(){var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})};var g=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(b){g(b,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=
this.batch_;this.batch_=[];for(var e=0;e<b.length;++e){var a=b[e];delete b[e];try{a()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};d.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var a=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{b(e.resolve,e.reject)}catch(k){e.reject(k)}};a.prototype.createResolveAndReject_=function(){function b(b){return function(c){a||(a=!0,b.call(e,c))}}var e=this,a=
!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof a)this.settleSameAsPromise_(b);else{var e;a:switch(typeof b){case "object":e=null!=b;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};a.prototype.resolveToNonPromiseObj_=function(b){var a=void 0;try{a=b.then}catch(k){this.reject_(k);return}"function"==
typeof a?this.settleSameAsThenable_(a,b):this.fulfill_(b)};a.prototype.reject_=function(b){this.settle_(2,b)};a.prototype.fulfill_=function(b){this.settle_(1,b)};a.prototype.settle_=function(b,a){if(0!=this.state_)throw Error("Cannot settle("+b+", "+a|"): Promise already settled in state"+this.state_);this.state_=b;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=this.onSettledCallbacks_,a=0;a<b.length;++a)b[a].call(),
b[a]=null;this.onSettledCallbacks_=null}};var l=new d;a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,a){var c=this.createResolveAndReject_();try{b.call(a,c.resolve,c.reject)}catch(m){c.reject(m)}};a.prototype.then=function(b,c){function e(b,a){return"function"==typeof b?function(a){try{d(b(a))}catch(f){h(f)}}:a}var d,h,g=new a(function(a,b){d=a;h=b});this.callWhenSettled_(e(b,d),
e(c,h));return g};a.prototype["catch"]=function(a){return this.then(void 0,a)};a.prototype.callWhenSettled_=function(a,c){function b(){switch(d.state_){case 1:a(d.result_);break;case 2:c(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?l.asyncExecute(b):this.onSettledCallbacks_.push(function(){l.asyncExecute(b)})};a.resolve=function(b){return b instanceof a?b:new a(function(a,c){a(b)})};a.reject=function(b){return new a(function(a,c){c(b)})};
a.race=function(b){return new a(function(c,d){for(var e=$jscomp.makeIterator(b),h=e.next();!h.done;h=e.next())a.resolve(h.value).callWhenSettled_(c,d)})};a.all=function(b){var c=$jscomp.makeIterator(b),d=c.next();return d.done?a.resolve([]):new a(function(b,e){function h(a){return function(c){g[a]=c;k--;0==k&&b(g)}}var g=[],k=0;do g.push(void 0),k++,a.resolve(d.value).callWhenSettled_(h(g.length-1),e),d=c.next();while(!d.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(a.$jscomp$new$AsyncExecutor=function(){return new d});
return a},"es6-impl","es3");
(function(){function c(a){return new Promise(function(b,c){a.onsuccess=function(){b(a.result)};a.onerror=function(){c(a.error)}})}function d(a,b,d){var f,r=new Promise(function(r,u){f=a[b].apply(a,d);c(f).then(r,u)});r.request=f;return r}function g(a,b,c){var f=d(a,b,c);return f.then(function(a){if(a)return new m(a,f.request)})}function a(a,b,c){c.forEach(function(c){Object.defineProperty(a.prototype,c,{get:function(){return this[b][c]},set:function(a){this[b][c]=a}})})}function l(a,b,c,e){e.forEach(function(f){f in
c.prototype&&(a.prototype[f]=function(){return d(this[b],f,arguments)})})}function b(a,b,c,d){d.forEach(function(f){f in c.prototype&&(a.prototype[f]=function(){return this[b][f].apply(this[b],arguments)})})}function e(a,b,c,d){d.forEach(function(f){f in c.prototype&&(a.prototype[f]=function(){return g(this[b],f,arguments)})})}function k(a){this._index=a}function m(a,b){this._cursor=a;this._request=b}function h(a){this._store=a}function n(a){this._tx=a;this.complete=new Promise(function(b,c){a.oncomplete=
function(){b()};a.onerror=function(){c(a.error)};a.onabort=function(){c(a.error)}})}function p(a,b,c){this._db=a;this.oldVersion=b;this.transaction=new n(c)}function q(a){this._db=a}a(k,"_index",["name","keyPath","multiEntry","unique"]);l(k,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);e(k,"_index",IDBIndex,["openCursor","openKeyCursor"]);a(m,"_cursor",["direction","key","primaryKey","value"]);l(m,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(a){a in
IDBCursor.prototype&&(m.prototype[a]=function(){var b=this,d=arguments;return Promise.resolve().then(function(){b._cursor[a].apply(b._cursor,d);return c(b._request).then(function(a){if(a)return new m(a,b._request)})})})});h.prototype.createIndex=function(){return new k(this._store.createIndex.apply(this._store,arguments))};h.prototype.index=function(){return new k(this._store.index.apply(this._store,arguments))};a(h,"_store",["name","keyPath","indexNames","autoIncrement"]);l(h,"_store",IDBObjectStore,
"put add delete clear get getAll getKey getAllKeys count".split(" "));e(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);b(h,"_store",IDBObjectStore,["deleteIndex"]);n.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))};a(n,"_tx",["objectStoreNames","mode"]);b(n,"_tx",IDBTransaction,["abort"]);p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))};a(p,"_db",["name","version","objectStoreNames"]);
b(p,"_db",IDBDatabase,["deleteObjectStore","close"]);q.prototype.transaction=function(){return new n(this._db.transaction.apply(this._db,arguments))};a(q,"_db",["name","version","objectStoreNames"]);b(q,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(a){[h,k].forEach(function(b){a in b.prototype&&(b.prototype[a.replace("open","iterate")]=function(){var b=Array.prototype.slice.call(arguments),c=b[b.length-1],d=this._store||this._index,f=d[a].apply(d,b.slice(0,-1));f.onsuccess=
function(){c(f.result)}})})});[k,h].forEach(function(a){a.prototype.getAll||(a.prototype.getAll=function(a,b){var c=this,d=[];return new Promise(function(f){c.iterateCursor(a,function(a){a?(d.push(a.value),void 0!==b&&d.length===b?f(d):a["continue"]()):f(d)})})})});var t={open:function(a,b,c){a=d(indexedDB,"open",[a,b]);var e=a.request;e.onupgradeneeded=function(a){c&&c(new p(e.result,a.oldVersion,e.transaction))};return a.then(function(a){return new q(a)})},"delete":function(a){return d(indexedDB,
"deleteDatabase",[a])}};"undefined"!==typeof module?(module.exports=t,module.exports["default"]=module.exports):self.idb=t})();
